{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import MapPreview from\"./MapPreview\";// âœ… Import the new preview component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MapList=()=>{const[maps,setMaps]=useState([]);const[selectedMapId,setSelectedMapId]=useState(null);// âœ… Track the selected map\nuseEffect(()=>{fetchMaps();},[]);const fetchMaps=async()=>{try{const response=await fetch(\"/maps/get_maps\");const data=await response.json();if(response.ok){// Fetch counts for each map\nconst mapsWithCounts=await Promise.all(data.map(async map=>{const[zoneRes,regionRes,triggerRes]=await Promise.all([fetch(`/maps/get_map_zones/${map.i_map}`),fetch(`/maps/get_map_regions/${map.i_map}`),fetch(`/maps/get_map_triggers/${map.i_map}`)]);const[zoneData,regionData,triggerData]=await Promise.all([zoneRes.json(),regionRes.json(),triggerRes.json()]);return{...map,zone_count:zoneData.zone_count||0,region_count:regionData.region_count||0,trigger_count:triggerData.trigger_count||0};}));setMaps(mapsWithCounts);}else{throw new Error(data.detail||\"Failed to fetch maps\");}}catch(err){console.error(\"Error fetching maps:\",err);}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"700px\",margin:\"auto\",padding:\"20px\",border:\"1px solid #ddd\",borderRadius:\"8px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Uploaded Maps\"}),maps.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No maps uploaded yet.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0},children:maps.map(map=>/*#__PURE__*/_jsxs(\"li\",{style:{padding:\"10px\",borderBottom:\"1px solid #ddd\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:map.x_nm_map}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"14px\",margin:\"5px 0\"},children:[\"\\uD83D\\uDDFA Zones: \",map.zone_count,\" | \\uD83D\\uDCCC Regions: \",map.region_count,\" | \\uD83D\\uDE80 Triggers: \",map.trigger_count]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedMapId(map.i_map),style:{padding:\"5px 10px\",marginRight:\"5px\",background:\"blue\",color:\"white\",border:\"none\",cursor:\"pointer\"},children:\"\\uD83D\\uDC40 View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteMap(map.i_map),style:{padding:\"5px 10px\",background:\"red\",color:\"white\",border:\"none\",cursor:\"pointer\"},children:\"\\uD83D\\uDDD1 Delete\"})]})]},map.i_map))}),selectedMapId&&/*#__PURE__*/_jsx(MapPreview,{mapId:selectedMapId,onClose:()=>setSelectedMapId(null)})]});};export default MapList;","map":{"version":3,"names":["React","useState","useEffect","MapPreview","jsx","_jsx","jsxs","_jsxs","MapList","maps","setMaps","selectedMapId","setSelectedMapId","fetchMaps","response","fetch","data","json","ok","mapsWithCounts","Promise","all","map","zoneRes","regionRes","triggerRes","i_map","zoneData","regionData","triggerData","zone_count","region_count","trigger_count","Error","detail","err","console","error","style","maxWidth","margin","padding","border","borderRadius","children","length","listStyle","borderBottom","display","justifyContent","alignItems","x_nm_map","fontSize","onClick","marginRight","background","color","cursor","deleteMap","mapId","onClose"],"sources":["/home/parcoadmin/parco_fastapi/app/src/components/MapList.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MapPreview from \"./MapPreview\";  // âœ… Import the new preview component\n\nconst MapList = () => {\n    const [maps, setMaps] = useState([]);\n    const [selectedMapId, setSelectedMapId] = useState(null);  // âœ… Track the selected map\n\n    useEffect(() => {\n        fetchMaps();\n    }, []);\n\n    const fetchMaps = async () => {\n        try {\n            const response = await fetch(\"/maps/get_maps\");\n            const data = await response.json();\n    \n            if (response.ok) {\n                // Fetch counts for each map\n                const mapsWithCounts = await Promise.all(\n                    data.map(async (map) => {\n                        const [zoneRes, regionRes, triggerRes] = await Promise.all([\n                            fetch(`/maps/get_map_zones/${map.i_map}`),\n                            fetch(`/maps/get_map_regions/${map.i_map}`),\n                            fetch(`/maps/get_map_triggers/${map.i_map}`)\n                        ]);\n    \n                        const [zoneData, regionData, triggerData] = await Promise.all([\n                            zoneRes.json(),\n                            regionRes.json(),\n                            triggerRes.json()\n                        ]);\n    \n                        return {\n                            ...map,\n                            zone_count: zoneData.zone_count || 0,\n                            region_count: regionData.region_count || 0,\n                            trigger_count: triggerData.trigger_count || 0\n                        };\n                    })\n                );\n    \n                setMaps(mapsWithCounts);\n            } else {\n                throw new Error(data.detail || \"Failed to fetch maps\");\n            }\n        } catch (err) {\n            console.error(\"Error fetching maps:\", err);\n        }\n    };\n    \n\n    return (\n        <div style={{ maxWidth: \"700px\", margin: \"auto\", padding: \"20px\", border: \"1px solid #ddd\", borderRadius: \"8px\" }}>\n            <h2>Uploaded Maps</h2>\n            {maps.length === 0 ? <p>No maps uploaded yet.</p> : (\n                <ul style={{ listStyle: \"none\", padding: 0 }}>\n                    {maps.map(map => (\n                        <li key={map.i_map} style={{ padding: \"10px\", borderBottom: \"1px solid #ddd\", display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                            <div>\n                                <strong>{map.x_nm_map}</strong>\n                                <p style={{ fontSize: \"14px\", margin: \"5px 0\" }}>\n                                    ðŸ—º Zones: {map.zone_count} | ðŸ“Œ Regions: {map.region_count} | ðŸš€ Triggers: {map.trigger_count}\n                                </p>\n                            </div>\n                            <div>\n                                <button onClick={() => setSelectedMapId(map.i_map)} style={{ padding: \"5px 10px\", marginRight: \"5px\", background: \"blue\", color: \"white\", border: \"none\", cursor: \"pointer\" }}>ðŸ‘€ View</button>\n                                <button onClick={() => deleteMap(map.i_map)} style={{ padding: \"5px 10px\", background: \"red\", color: \"white\", border: \"none\", cursor: \"pointer\" }}>ðŸ—‘ Delete</button>\n                            </div>\n                        </li>\n                    ))}\n                </ul>\n            )}\n\n            {/* âœ… Show MapPreview when a map is selected */}\n            {selectedMapId && <MapPreview mapId={selectedMapId} onClose={() => setSelectedMapId(null)} />}\n        </div>\n    );\n};\n\nexport default MapList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}