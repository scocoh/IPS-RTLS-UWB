{"ast":null,"code":"var _jsxFileName = \"/home/parcoadmin/parco_fastapi/app/src/components/Map.js\",\n  _s = $RefreshSig$();\n// bug found on trigger add with leaflet and canvas - OpenAI change from Grok - related to all in one vs just trigger\nimport React, { useEffect, useRef, useState, memo } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\"; // Leaflet core CSS\nimport \"leaflet-draw/dist/leaflet.draw.css\"; // Leaflet.Draw CSS\nimport \"leaflet-draw\"; // Import Leaflet.Draw\nimport \"./Map.css\"; // Canvas styling\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Map = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  zoneId,\n  onDrawComplete,\n  triggerColor,\n  useLeaflet\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const drawnItems = useRef(new L.FeatureGroup());\n  const canvasRef = useRef(null);\n  const [mapData, setMapData] = useState(null);\n  const [error, setError] = useState(null);\n  const isInitialized = useRef(false);\n  const points = useRef([]);\n  const isDrawing = useRef(false);\n  const ctxRef = useRef(null);\n  const imageRef = useRef(null);\n  const lastClickTime = useRef(0); // For debouncing double-click\n\n  // ✅ Fetch map data when zoneId changes\n  useEffect(() => {\n    if (zoneId) {\n      const fetchMapData = async () => {\n        try {\n          const response = await fetch(`/maps/get_map_data/${zoneId}`);\n          if (!response.ok) {\n            const text = await response.text();\n            throw new Error(`HTTP error! status: ${response.status}, response: ${text}`);\n          }\n          const data = await response.json();\n          console.log(\"Map data fetched:\", data);\n          setMapData(data);\n          setError(null);\n        } catch (error) {\n          console.error(\"Error fetching map data:\", error);\n          setError(`Error fetching map data: ${error.message}`);\n        }\n      };\n      fetchMapData();\n    }\n  }, [zoneId]);\n\n  // ✅ Leaflet Rendering with Cleanup to Prevent Duplicate Maps\n  useEffect(() => {\n    if (mapData && mapRef.current && useLeaflet) {\n      // ✅ FIX: Remove existing Leaflet map before initializing a new one\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n      }\n      mapInstance.current = L.map(mapRef.current, {\n        crs: L.CRS.Simple,\n        minZoom: -5,\n        maxZoom: 5,\n        zoomControl: true,\n        attributionControl: false\n      });\n      const xMin = mapData.bounds[0][1];\n      const xMax = mapData.bounds[1][1];\n      const yMin = mapData.bounds[0][0];\n      const yMax = mapData.bounds[1][0];\n      L.imageOverlay(mapData.imageUrl, [[yMin, xMin],\n      // Bottom-left\n      [yMax, xMax] // Top-right\n      ]).addTo(mapInstance.current);\n      mapInstance.current.fitBounds([[yMin, xMin], [yMax, xMax]]);\n      mapInstance.current.addLayer(drawnItems.current);\n      const colorMap = {\n        red: \"#ff0000\",\n        green: \"#00ff00\",\n        blue: \"#0000ff\"\n      };\n      const drawControl = new L.Control.Draw({\n        edit: {\n          featureGroup: drawnItems.current\n        },\n        draw: {\n          polygon: {\n            shapeOptions: {\n              color: colorMap[triggerColor] || \"#ff0000\",\n              weight: 2\n            }\n          },\n          rectangle: false,\n          polyline: false,\n          circle: false,\n          marker: false,\n          circlemarker: false\n        }\n      });\n      mapInstance.current.addControl(drawControl);\n      mapInstance.current.on(L.Draw.Event.CREATED, event => {\n        const layer = event.layer;\n        drawnItems.current.addLayer(layer);\n        const coords = layer.getLatLngs()[0].map((latLng, index) => ({\n          n_x: xMin + (latLng.lng - xMin) / (xMax - xMin) * (xMax - xMin),\n          n_y: yMin + (latLng.lat - yMin) / (yMax - yMin) * (yMax - yMin),\n          n_z: 0,\n          n_ord: index + 1\n        }));\n        console.log(\"Scaled points (Leaflet):\", coords);\n        if (onDrawComplete) onDrawComplete(JSON.stringify(coords));\n      });\n      isInitialized.current = true;\n    }\n\n    // ✅ Cleanup function\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n        isInitialized.current = false;\n      }\n    };\n  }, [mapData, onDrawComplete, triggerColor, useLeaflet]);\n\n  // ✅ Canvas Rendering with Default Image Fallback\n  useEffect(() => {\n    if (mapData && canvasRef.current && !useLeaflet) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      ctxRef.current = ctx;\n      canvas.width = 600;\n      canvas.height = 500;\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n\n      // ✅ FIX: Use default image if mapData.imageUrl is missing\n      img.src = mapData.imageUrl || \"/static/default_map.png\";\n      imageRef.current = img;\n      img.onload = () => {\n        console.log(\"Canvas: Map image loaded successfully:\", img.src);\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n      };\n      img.onerror = () => {\n        console.error(\"Failed to load map image, using default:\", mapData.imageUrl);\n        setError(\"Failed to load map image. Using default.\");\n        img.src = \"/static/default_map.png\"; // Load fallback image\n      };\n    }\n  }, [mapData, useLeaflet]);\n\n  // ✅ Cleanup\n  useEffect(() => {\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n        isInitialized.current = false;\n      }\n    };\n  }, [mapData]);\n  if (useLeaflet) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\",\n          marginBottom: \"10px\"\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: mapRef,\n        style: {\n          height: \"500px\",\n          width: \"600px\",\n          border: \"2px solid black\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\",\n          marginBottom: \"10px\"\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        id: \"map\",\n        style: {\n          border: \"2px solid black\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this);\n  }\n}, \"byg4eIe6jqT7PeaoHAUHZDfv6P8=\")), \"byg4eIe6jqT7PeaoHAUHZDfv6P8=\");\n_c2 = Map;\nexport default Map;\nvar _c, _c2;\n$RefreshReg$(_c, \"Map$memo\");\n$RefreshReg$(_c2, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","useState","memo","L","jsxDEV","_jsxDEV","Map","_s","_c","zoneId","onDrawComplete","triggerColor","useLeaflet","mapRef","mapInstance","drawnItems","FeatureGroup","canvasRef","mapData","setMapData","error","setError","isInitialized","points","isDrawing","ctxRef","imageRef","lastClickTime","fetchMapData","response","fetch","ok","text","Error","status","data","json","console","log","message","current","remove","map","crs","CRS","Simple","minZoom","maxZoom","zoomControl","attributionControl","xMin","bounds","xMax","yMin","yMax","imageOverlay","imageUrl","addTo","fitBounds","addLayer","colorMap","red","green","blue","drawControl","Control","Draw","edit","featureGroup","draw","polygon","shapeOptions","color","weight","rectangle","polyline","circle","marker","circlemarker","addControl","on","Event","CREATED","event","layer","coords","getLatLngs","latLng","index","n_x","lng","n_y","lat","n_z","n_ord","JSON","stringify","canvas","ctx","getContext","width","height","img","Image","crossOrigin","src","onload","drawImage","onerror","children","style","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","ref","border","id","_c2","$RefreshReg$"],"sources":["/home/parcoadmin/parco_fastapi/app/src/components/Map.js"],"sourcesContent":["// bug found on trigger add with leaflet and canvas - OpenAI change from Grok - related to all in one vs just trigger\nimport React, { useEffect, useRef, useState, memo } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\"; // Leaflet core CSS\nimport \"leaflet-draw/dist/leaflet.draw.css\"; // Leaflet.Draw CSS\nimport \"leaflet-draw\"; // Import Leaflet.Draw\nimport \"./Map.css\"; // Canvas styling\n\nconst Map = memo(({ zoneId, onDrawComplete, triggerColor, useLeaflet }) => {\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const drawnItems = useRef(new L.FeatureGroup());\n  const canvasRef = useRef(null);\n  const [mapData, setMapData] = useState(null);\n  const [error, setError] = useState(null);\n  const isInitialized = useRef(false);\n  const points = useRef([]);\n  const isDrawing = useRef(false);\n  const ctxRef = useRef(null);\n  const imageRef = useRef(null);\n  const lastClickTime = useRef(0); // For debouncing double-click\n\n  // ✅ Fetch map data when zoneId changes\n  useEffect(() => {\n    if (zoneId) {\n      const fetchMapData = async () => {\n        try {\n          const response = await fetch(`/maps/get_map_data/${zoneId}`);\n          if (!response.ok) {\n            const text = await response.text();\n            throw new Error(`HTTP error! status: ${response.status}, response: ${text}`);\n          }\n          const data = await response.json();\n          console.log(\"Map data fetched:\", data);\n          setMapData(data);\n          setError(null);\n        } catch (error) {\n          console.error(\"Error fetching map data:\", error);\n          setError(`Error fetching map data: ${error.message}`);\n        }\n      };\n      fetchMapData();\n    }\n  }, [zoneId]);\n\n  // ✅ Leaflet Rendering with Cleanup to Prevent Duplicate Maps\n  useEffect(() => {\n    if (mapData && mapRef.current && useLeaflet) {\n      // ✅ FIX: Remove existing Leaflet map before initializing a new one\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n      }\n\n      mapInstance.current = L.map(mapRef.current, {\n        crs: L.CRS.Simple,\n        minZoom: -5,\n        maxZoom: 5,\n        zoomControl: true,\n        attributionControl: false,\n      });\n\n      const xMin = mapData.bounds[0][1];\n      const xMax = mapData.bounds[1][1];\n      const yMin = mapData.bounds[0][0];\n      const yMax = mapData.bounds[1][0];\n\n      L.imageOverlay(mapData.imageUrl, [\n        [yMin, xMin], // Bottom-left\n        [yMax, xMax], // Top-right\n      ]).addTo(mapInstance.current);\n\n      mapInstance.current.fitBounds([\n        [yMin, xMin],\n        [yMax, xMax],\n      ]);\n\n      mapInstance.current.addLayer(drawnItems.current);\n\n      const colorMap = { red: \"#ff0000\", green: \"#00ff00\", blue: \"#0000ff\" };\n      const drawControl = new L.Control.Draw({\n        edit: { featureGroup: drawnItems.current },\n        draw: {\n          polygon: { shapeOptions: { color: colorMap[triggerColor] || \"#ff0000\", weight: 2 } },\n          rectangle: false,\n          polyline: false,\n          circle: false,\n          marker: false,\n          circlemarker: false,\n        },\n      });\n      mapInstance.current.addControl(drawControl);\n\n      mapInstance.current.on(L.Draw.Event.CREATED, (event) => {\n        const layer = event.layer;\n        drawnItems.current.addLayer(layer);\n        const coords = layer.getLatLngs()[0].map((latLng, index) => ({\n          n_x: xMin + ((latLng.lng - xMin) / (xMax - xMin)) * (xMax - xMin),\n          n_y: yMin + ((latLng.lat - yMin) / (yMax - yMin)) * (yMax - yMin),\n          n_z: 0,\n          n_ord: index + 1,\n        }));\n        console.log(\"Scaled points (Leaflet):\", coords);\n        if (onDrawComplete) onDrawComplete(JSON.stringify(coords));\n      });\n\n      isInitialized.current = true;\n    }\n\n    // ✅ Cleanup function\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n        isInitialized.current = false;\n      }\n    };\n  }, [mapData, onDrawComplete, triggerColor, useLeaflet]);\n\n  // ✅ Canvas Rendering with Default Image Fallback\n  useEffect(() => {\n    if (mapData && canvasRef.current && !useLeaflet) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      ctxRef.current = ctx;\n\n      canvas.width = 600;\n      canvas.height = 500;\n\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      \n      // ✅ FIX: Use default image if mapData.imageUrl is missing\n      img.src = mapData.imageUrl || \"/static/default_map.png\";\n\n      imageRef.current = img;\n\n      img.onload = () => {\n        console.log(\"Canvas: Map image loaded successfully:\", img.src);\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n      };\n\n      img.onerror = () => {\n        console.error(\"Failed to load map image, using default:\", mapData.imageUrl);\n        setError(\"Failed to load map image. Using default.\");\n        img.src = \"/static/default_map.png\"; // Load fallback image\n      };\n    }\n  }, [mapData, useLeaflet]);\n\n  // ✅ Cleanup\n  useEffect(() => {\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n        isInitialized.current = false;\n      }\n    };\n  }, [mapData]);\n\n  if (useLeaflet) {\n    return (\n      <div>\n        {error && <div style={{ color: \"red\", marginBottom: \"10px\" }}>{error}</div>}\n        <div ref={mapRef} style={{ height: \"500px\", width: \"600px\", border: \"2px solid black\" }} />\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        {error && <div style={{ color: \"red\", marginBottom: \"10px\" }}>{error}</div>}\n        <canvas ref={canvasRef} id=\"map\" style={{ border: \"2px solid black\" }} />\n      </div>\n    );\n  }\n});\n\nexport default Map;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}