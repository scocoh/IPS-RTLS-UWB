{"ast":null,"code":"var _jsxFileName = \"/home/parcoadmin/parco_fastapi/app/src/components/ZoneViewer.js\",\n  _s = $RefreshSig$();\n// /home/parcoadmin/parco_fastapi/app/src/components/ZoneViewer.js\nimport React, { useState, useEffect } from \"react\";\nimport MapZoneViewer from \"./MapZoneViewer\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ZoneViewer = () => {\n  _s();\n  var _zones$;\n  const [campuses, setCampuses] = useState([]);\n  const [selectedCampus, setSelectedCampus] = useState(null);\n  const [zones, setZones] = useState([]);\n  const [checkedZones, setCheckedZones] = useState([]);\n  const [vertices, setVertices] = useState([]);\n  const [useLeaflet, setUseLeaflet] = useState(false);\n  const [editedVertices, setEditedVertices] = useState({});\n  const [deletedVertices, setDeletedVertices] = useState([]); // New state for staged deletions\n  const [fetchError, setFetchError] = useState(null);\n  const API_BASE_URL = \"http://192.168.210.231:8000\";\n\n  // Fetch campuses on mount\n  useEffect(() => {\n    const fetchCampuses = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/zoneviewer/get_campus_zones`);\n        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\n        const data = await response.json();\n        setCampuses(data.campuses || []);\n        setFetchError(null);\n      } catch (error) {\n        console.error(\"❌ Error fetching campuses:\", error);\n        setFetchError(error.message);\n      }\n    };\n    fetchCampuses();\n  }, []);\n\n  // Fetch zones and vertices when campus changes\n  useEffect(() => {\n    if (selectedCampus) {\n      const fetchZonesAndVertices = async () => {\n        try {\n          const zonesResponse = await fetch(`${API_BASE_URL}/zoneviewer/get_all_zones_for_campus/${selectedCampus}`);\n          if (!zonesResponse.ok) throw new Error(`Zones fetch failed: ${zonesResponse.status}`);\n          const zonesData = await zonesResponse.json();\n          setZones(zonesData.zones || []);\n          setCheckedZones([selectedCampus]);\n          const verticesResponse = await fetch(`${API_BASE_URL}/zoneviewer/get_vertices_for_campus/${selectedCampus}`);\n          if (!verticesResponse.ok) throw new Error(`Vertices fetch failed: ${verticesResponse.status}`);\n          const verticesData = await response.json();\n          setVertices(verticesData.vertices || []);\n          setEditedVertices({});\n          setDeletedVertices([]);\n        } catch (error) {\n          console.error(\"❌ Error fetching zones/vertices:\", error);\n          setFetchError(error.message);\n        }\n      };\n      fetchZonesAndVertices();\n    }\n  }, [selectedCampus]);\n\n  // Handle zone checkbox toggle\n  const handleZoneToggle = zoneId => {\n    setCheckedZones(prev => prev.includes(zoneId) ? prev.filter(id => id !== zoneId) : [...prev, zoneId]);\n  };\n\n  // Render zones recursively\n  const renderZones = (zones, depth = 0) => {\n    return zones.map(zone => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: `${depth * 20}px`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: checkedZones.includes(zone.zone_id),\n        onChange: () => handleZoneToggle(zone.zone_id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: zone.zone_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), zone.children && zone.children.length > 0 && renderZones(zone.children, depth + 1)]\n    }, zone.zone_id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this));\n  };\n\n  // Handle vertex edit\n  const handleVertexChange = (vertexId, field, value) => {\n    const numValue = parseFloat(value) || 0;\n    setEditedVertices(prev => ({\n      ...prev,\n      [vertexId]: {\n        ...prev[vertexId],\n        [field]: numValue\n      }\n    }));\n  };\n\n  // Stage vertex deletion\n  const stageDeleteVertex = vertexId => {\n    setDeletedVertices(prev => [...prev, vertexId]);\n    setVertices(prev => prev.filter(v => v.vertex_id !== vertexId));\n    setEditedVertices(prev => {\n      const newEdits = {\n        ...prev\n      };\n      delete newEdits[vertexId];\n      return newEdits;\n    });\n  };\n\n  // Add vertex before or after\n  const addVertex = async (zoneId, position, refVertexId) => {\n    try {\n      const zoneVertices = vertices.filter(v => v.zone_id === zoneId).sort((a, b) => a.order - b.order);\n      const refVertex = vertices.find(v => v.vertex_id === refVertexId);\n      const order = position === \"before\" ? refVertex ? refVertex.order - 0.5 : 0 : refVertex ? refVertex.order + 0.5 : zoneVertices.length + 1;\n      const response = await fetch(`${API_BASE_URL}/zoneviewer/add_vertex`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          zone_id: zoneId,\n          x: 0.0,\n          y: 0.0,\n          z: 0.0\n        })\n      });\n      if (!response.ok) throw new Error(`Failed to add vertex: ${response.status}`);\n      const newVertex = await response.json();\n\n      // Reorder vertices after adding\n      const updatedVertices = [...vertices, newVertex].map(v => {\n        if (v.zone_id !== zoneId) return v;\n        const currentOrder = v.vertex_id === newVertex.vertex_id ? order : v.order;\n        return {\n          ...v,\n          order: currentOrder\n        };\n      }).sort((a, b) => a.order - b.order).map((v, idx) => ({\n        ...v,\n        order: idx + 1\n      }));\n      setVertices(updatedVertices);\n      console.log(\"✅ Added vertex:\", newVertex);\n    } catch (error) {\n      console.error(\"❌ Error adding vertex:\", error);\n      alert(\"Failed to add vertex: \" + error.message);\n    }\n  };\n\n  // Save all changes (edits and deletions)\n  const saveVertices = async () => {\n    try {\n      // Handle deletions\n      for (const vertexId of deletedVertices) {\n        const response = await fetch(`${API_BASE_URL}/zoneviewer/delete_vertex/${vertexId}`, {\n          method: \"DELETE\"\n        });\n        if (!response.ok) throw new Error(`Failed to delete vertex ${vertexId}: ${response.status}`);\n      }\n\n      // Handle edits\n      const updates = Object.entries(editedVertices).map(([vertexId, changes]) => {\n        var _changes$x, _changes$y, _changes$z;\n        const vertex = vertices.find(v => v.vertex_id === parseInt(vertexId));\n        return {\n          vertex_id: vertex.vertex_id,\n          x: (_changes$x = changes.x) !== null && _changes$x !== void 0 ? _changes$x : vertex.x,\n          y: (_changes$y = changes.y) !== null && _changes$y !== void 0 ? _changes$y : vertex.y,\n          z: (_changes$z = changes.z) !== null && _changes$z !== void 0 ? _changes$z : vertex.z\n        };\n      });\n      if (updates.length > 0) {\n        const response = await fetch(`${API_BASE_URL}/zoneviewer/update_vertices`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(updates)\n        });\n        if (!response.ok) throw new Error(`Failed to save edits: ${response.status}`);\n        const result = await response.json();\n        console.log(\"✅ Vertices saved:\", result);\n      }\n\n      // Refresh vertices from server\n      const verticesResponse = await fetch(`${API_BASE_URL}/zoneviewer/get_vertices_for_campus/${selectedCampus}`);\n      if (!verticesResponse.ok) throw new Error(`Vertices fetch failed: ${verticesResponse.status}`);\n      const verticesData = await verticesResponse.json();\n      setVertices(verticesData.vertices || []);\n      setEditedVertices({});\n      setDeletedVertices([]);\n      alert(\"Changes saved successfully!\");\n    } catch (error) {\n      console.error(\"❌ Error saving changes:\", error);\n      alert(\"Failed to save changes: \" + error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Zone Viewer & Editor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }, this), fetchError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      children: fetchError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Select Campus:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => setSelectedCampus(parseInt(e.target.value)),\n      value: selectedCampus || \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Select a Campus\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this), campuses.map(campus => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: campus.zone_id,\n        children: campus.zone_name\n      }, campus.zone_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Render with Leaflet:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      checked: useLeaflet,\n      onChange: e => setUseLeaflet(e.target.checked)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }, this), selectedCampus && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Zones:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: renderZones(zones)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(MapZoneViewer, {\n        mapId: (_zones$ = zones[0]) === null || _zones$ === void 0 ? void 0 : _zones$.map_id,\n        zones: zones,\n        checkedZones: checkedZones,\n        vertices: vertices,\n        useLeaflet: useLeaflet\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Edit Vertices:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: \"100%\",\n          borderCollapse: \"collapse\",\n          border: \"1px solid black\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: \"1px solid black\",\n                padding: \"8px\"\n              },\n              children: \"Vertex #\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: \"1px solid black\",\n                padding: \"8px\"\n              },\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: \"1px solid black\",\n                padding: \"8px\"\n              },\n              children: \"Y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: \"1px solid black\",\n                padding: \"8px\"\n              },\n              children: \"Z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: \"1px solid black\",\n                padding: \"8px\"\n              },\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: vertices.filter(v => checkedZones.includes(v.zone_id)).map(v => {\n            var _editedVertices$v$ver, _editedVertices$v$ver2, _editedVertices$v$ver3, _editedVertices$v$ver4, _editedVertices$v$ver5, _editedVertices$v$ver6;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  border: \"1px solid black\",\n                  padding: \"8px\"\n                },\n                children: v.vertex_id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  border: \"1px solid black\",\n                  padding: \"8px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: (_editedVertices$v$ver = (_editedVertices$v$ver2 = editedVertices[v.vertex_id]) === null || _editedVertices$v$ver2 === void 0 ? void 0 : _editedVertices$v$ver2.x) !== null && _editedVertices$v$ver !== void 0 ? _editedVertices$v$ver : v.x,\n                  onChange: e => handleVertexChange(v.vertex_id, \"x\", e.target.value),\n                  step: \"0.000001\",\n                  style: {\n                    width: \"100px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  border: \"1px solid black\",\n                  padding: \"8px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: (_editedVertices$v$ver3 = (_editedVertices$v$ver4 = editedVertices[v.vertex_id]) === null || _editedVertices$v$ver4 === void 0 ? void 0 : _editedVertices$v$ver4.y) !== null && _editedVertices$v$ver3 !== void 0 ? _editedVertices$v$ver3 : v.y,\n                  onChange: e => handleVertexChange(v.vertex_id, \"y\", e.target.value),\n                  step: \"0.000001\",\n                  style: {\n                    width: \"100px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  border: \"1px solid black\",\n                  padding: \"8px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: (_editedVertices$v$ver5 = (_editedVertices$v$ver6 = editedVertices[v.vertex_id]) === null || _editedVertices$v$ver6 === void 0 ? void 0 : _editedVertices$v$ver6.z) !== null && _editedVertices$v$ver5 !== void 0 ? _editedVertices$v$ver5 : v.z,\n                  onChange: e => handleVertexChange(v.vertex_id, \"z\", e.target.value),\n                  step: \"0.000001\",\n                  style: {\n                    width: \"100px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  border: \"1px solid black\",\n                  padding: \"8px\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => addVertex(v.zone_id, \"before\", v.vertex_id),\n                  children: \"Add Before\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => addVertex(v.zone_id, \"after\", v.vertex_id),\n                  children: \"Add After\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => stageDeleteVertex(v.vertex_id),\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 41\n              }, this)]\n            }, v.vertex_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveVertices,\n        style: {\n          marginTop: \"10px\"\n        },\n        children: \"Save All Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 9\n  }, this);\n};\n_s(ZoneViewer, \"xh1ckCpDQxq+eYHOXhCIrl49muc=\");\n_c = ZoneViewer;\nexport default ZoneViewer;\nvar _c;\n$RefreshReg$(_c, \"ZoneViewer\");","map":{"version":3,"names":["React","useState","useEffect","MapZoneViewer","jsxDEV","_jsxDEV","Fragment","_Fragment","ZoneViewer","_s","_zones$","campuses","setCampuses","selectedCampus","setSelectedCampus","zones","setZones","checkedZones","setCheckedZones","vertices","setVertices","useLeaflet","setUseLeaflet","editedVertices","setEditedVertices","deletedVertices","setDeletedVertices","fetchError","setFetchError","API_BASE_URL","fetchCampuses","response","fetch","ok","Error","status","data","json","error","console","message","fetchZonesAndVertices","zonesResponse","zonesData","verticesResponse","verticesData","handleZoneToggle","zoneId","prev","includes","filter","id","renderZones","depth","map","zone","style","marginLeft","children","type","checked","zone_id","onChange","fileName","_jsxFileName","lineNumber","columnNumber","zone_name","length","handleVertexChange","vertexId","field","value","numValue","parseFloat","stageDeleteVertex","v","vertex_id","newEdits","addVertex","position","refVertexId","zoneVertices","sort","a","b","order","refVertex","find","method","headers","body","JSON","stringify","x","y","z","newVertex","updatedVertices","currentOrder","idx","log","alert","saveVertices","updates","Object","entries","changes","_changes$x","_changes$y","_changes$z","vertex","parseInt","result","color","e","target","campus","mapId","map_id","width","borderCollapse","border","padding","_editedVertices$v$ver","_editedVertices$v$ver2","_editedVertices$v$ver3","_editedVertices$v$ver4","_editedVertices$v$ver5","_editedVertices$v$ver6","step","onClick","marginTop","_c","$RefreshReg$"],"sources":["/home/parcoadmin/parco_fastapi/app/src/components/ZoneViewer.js"],"sourcesContent":["// /home/parcoadmin/parco_fastapi/app/src/components/ZoneViewer.js\nimport React, { useState, useEffect } from \"react\";\nimport MapZoneViewer from \"./MapZoneViewer\";\n\nconst ZoneViewer = () => {\n    const [campuses, setCampuses] = useState([]);\n    const [selectedCampus, setSelectedCampus] = useState(null);\n    const [zones, setZones] = useState([]);\n    const [checkedZones, setCheckedZones] = useState([]);\n    const [vertices, setVertices] = useState([]);\n    const [useLeaflet, setUseLeaflet] = useState(false);\n    const [editedVertices, setEditedVertices] = useState({});\n    const [deletedVertices, setDeletedVertices] = useState([]); // New state for staged deletions\n    const [fetchError, setFetchError] = useState(null);\n    const API_BASE_URL = \"http://192.168.210.231:8000\";\n\n    // Fetch campuses on mount\n    useEffect(() => {\n        const fetchCampuses = async () => {\n            try {\n                const response = await fetch(`${API_BASE_URL}/zoneviewer/get_campus_zones`);\n                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\n                const data = await response.json();\n                setCampuses(data.campuses || []);\n                setFetchError(null);\n            } catch (error) {\n                console.error(\"❌ Error fetching campuses:\", error);\n                setFetchError(error.message);\n            }\n        };\n        fetchCampuses();\n    }, []);\n\n    // Fetch zones and vertices when campus changes\n    useEffect(() => {\n        if (selectedCampus) {\n            const fetchZonesAndVertices = async () => {\n                try {\n                    const zonesResponse = await fetch(`${API_BASE_URL}/zoneviewer/get_all_zones_for_campus/${selectedCampus}`);\n                    if (!zonesResponse.ok) throw new Error(`Zones fetch failed: ${zonesResponse.status}`);\n                    const zonesData = await zonesResponse.json();\n                    setZones(zonesData.zones || []);\n                    setCheckedZones([selectedCampus]);\n\n                    const verticesResponse = await fetch(`${API_BASE_URL}/zoneviewer/get_vertices_for_campus/${selectedCampus}`);\n                    if (!verticesResponse.ok) throw new Error(`Vertices fetch failed: ${verticesResponse.status}`);\n                    const verticesData = await response.json();\n                    setVertices(verticesData.vertices || []);\n                    setEditedVertices({});\n                    setDeletedVertices([]);\n                } catch (error) {\n                    console.error(\"❌ Error fetching zones/vertices:\", error);\n                    setFetchError(error.message);\n                }\n            };\n            fetchZonesAndVertices();\n        }\n    }, [selectedCampus]);\n\n    // Handle zone checkbox toggle\n    const handleZoneToggle = (zoneId) => {\n        setCheckedZones((prev) =>\n            prev.includes(zoneId) ? prev.filter((id) => id !== zoneId) : [...prev, zoneId]\n        );\n    };\n\n    // Render zones recursively\n    const renderZones = (zones, depth = 0) => {\n        return zones.map((zone) => (\n            <div key={zone.zone_id} style={{ marginLeft: `${depth * 20}px` }}>\n                <input\n                    type=\"checkbox\"\n                    checked={checkedZones.includes(zone.zone_id)}\n                    onChange={() => handleZoneToggle(zone.zone_id)}\n                />\n                <span>{zone.zone_name}</span>\n                {zone.children && zone.children.length > 0 && renderZones(zone.children, depth + 1)}\n            </div>\n        ));\n    };\n\n    // Handle vertex edit\n    const handleVertexChange = (vertexId, field, value) => {\n        const numValue = parseFloat(value) || 0;\n        setEditedVertices((prev) => ({\n            ...prev,\n            [vertexId]: { ...prev[vertexId], [field]: numValue },\n        }));\n    };\n\n    // Stage vertex deletion\n    const stageDeleteVertex = (vertexId) => {\n        setDeletedVertices((prev) => [...prev, vertexId]);\n        setVertices((prev) => prev.filter((v) => v.vertex_id !== vertexId));\n        setEditedVertices((prev) => {\n            const newEdits = { ...prev };\n            delete newEdits[vertexId];\n            return newEdits;\n        });\n    };\n\n    // Add vertex before or after\n    const addVertex = async (zoneId, position, refVertexId) => {\n        try {\n            const zoneVertices = vertices.filter(v => v.zone_id === zoneId).sort((a, b) => a.order - b.order);\n            const refVertex = vertices.find(v => v.vertex_id === refVertexId);\n            const order = position === \"before\" \n                ? (refVertex ? refVertex.order - 0.5 : 0) \n                : (refVertex ? refVertex.order + 0.5 : zoneVertices.length + 1);\n\n            const response = await fetch(`${API_BASE_URL}/zoneviewer/add_vertex`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ zone_id: zoneId, x: 0.0, y: 0.0, z: 0.0 }),\n            });\n            if (!response.ok) throw new Error(`Failed to add vertex: ${response.status}`);\n            const newVertex = await response.json();\n\n            // Reorder vertices after adding\n            const updatedVertices = [...vertices, newVertex].map(v => {\n                if (v.zone_id !== zoneId) return v;\n                const currentOrder = v.vertex_id === newVertex.vertex_id ? order : v.order;\n                return { ...v, order: currentOrder };\n            }).sort((a, b) => a.order - b.order).map((v, idx) => ({ ...v, order: idx + 1 }));\n\n            setVertices(updatedVertices);\n            console.log(\"✅ Added vertex:\", newVertex);\n        } catch (error) {\n            console.error(\"❌ Error adding vertex:\", error);\n            alert(\"Failed to add vertex: \" + error.message);\n        }\n    };\n\n    // Save all changes (edits and deletions)\n    const saveVertices = async () => {\n        try {\n            // Handle deletions\n            for (const vertexId of deletedVertices) {\n                const response = await fetch(`${API_BASE_URL}/zoneviewer/delete_vertex/${vertexId}`, {\n                    method: \"DELETE\",\n                });\n                if (!response.ok) throw new Error(`Failed to delete vertex ${vertexId}: ${response.status}`);\n            }\n\n            // Handle edits\n            const updates = Object.entries(editedVertices).map(([vertexId, changes]) => {\n                const vertex = vertices.find((v) => v.vertex_id === parseInt(vertexId));\n                return { vertex_id: vertex.vertex_id, x: changes.x ?? vertex.x, y: changes.y ?? vertex.y, z: changes.z ?? vertex.z };\n            });\n            if (updates.length > 0) {\n                const response = await fetch(`${API_BASE_URL}/zoneviewer/update_vertices`, {\n                    method: \"POST\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify(updates),\n                });\n                if (!response.ok) throw new Error(`Failed to save edits: ${response.status}`);\n                const result = await response.json();\n                console.log(\"✅ Vertices saved:\", result);\n            }\n\n            // Refresh vertices from server\n            const verticesResponse = await fetch(`${API_BASE_URL}/zoneviewer/get_vertices_for_campus/${selectedCampus}`);\n            if (!verticesResponse.ok) throw new Error(`Vertices fetch failed: ${verticesResponse.status}`);\n            const verticesData = await verticesResponse.json();\n            setVertices(verticesData.vertices || []);\n            setEditedVertices({});\n            setDeletedVertices([]);\n            alert(\"Changes saved successfully!\");\n        } catch (error) {\n            console.error(\"❌ Error saving changes:\", error);\n            alert(\"Failed to save changes: \" + error.message);\n        }\n    };\n\n    return (\n        <div>\n            <h2>Zone Viewer & Editor</h2>\n            {fetchError && <div style={{ color: \"red\" }}>{fetchError}</div>}\n\n            <label>Select Campus:</label>\n            <select onChange={(e) => setSelectedCampus(parseInt(e.target.value))} value={selectedCampus || \"\"}>\n                <option value=\"\">Select a Campus</option>\n                {campuses.map((campus) => (\n                    <option key={campus.zone_id} value={campus.zone_id}>\n                        {campus.zone_name}\n                    </option>\n                ))}\n            </select>\n\n            <label>Render with Leaflet:</label>\n            <input type=\"checkbox\" checked={useLeaflet} onChange={(e) => setUseLeaflet(e.target.checked)} />\n\n            {selectedCampus && (\n                <>\n                    <h3>Zones:</h3>\n                    <div>{renderZones(zones)}</div>\n\n                    <MapZoneViewer\n                        mapId={zones[0]?.map_id}\n                        zones={zones}\n                        checkedZones={checkedZones}\n                        vertices={vertices}\n                        useLeaflet={useLeaflet}\n                    />\n\n                    <h3>Edit Vertices:</h3>\n                    <table style={{ width: \"100%\", borderCollapse: \"collapse\", border: \"1px solid black\" }}>\n                        <thead>\n                            <tr>\n                                <th style={{ border: \"1px solid black\", padding: \"8px\" }}>Vertex #</th>\n                                <th style={{ border: \"1px solid black\", padding: \"8px\" }}>X</th>\n                                <th style={{ border: \"1px solid black\", padding: \"8px\" }}>Y</th>\n                                <th style={{ border: \"1px solid black\", padding: \"8px\" }}>Z</th>\n                                <th style={{ border: \"1px solid black\", padding: \"8px\" }}>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {vertices\n                                .filter((v) => checkedZones.includes(v.zone_id))\n                                .map((v) => (\n                                    <tr key={v.vertex_id}>\n                                        <td style={{ border: \"1px solid black\", padding: \"8px\" }}>{v.vertex_id}</td>\n                                        <td style={{ border: \"1px solid black\", padding: \"8px\" }}>\n                                            <input\n                                                type=\"number\"\n                                                value={editedVertices[v.vertex_id]?.x ?? v.x}\n                                                onChange={(e) => handleVertexChange(v.vertex_id, \"x\", e.target.value)}\n                                                step=\"0.000001\"\n                                                style={{ width: \"100px\" }}\n                                            />\n                                        </td>\n                                        <td style={{ border: \"1px solid black\", padding: \"8px\" }}>\n                                            <input\n                                                type=\"number\"\n                                                value={editedVertices[v.vertex_id]?.y ?? v.y}\n                                                onChange={(e) => handleVertexChange(v.vertex_id, \"y\", e.target.value)}\n                                                step=\"0.000001\"\n                                                style={{ width: \"100px\" }}\n                                            />\n                                        </td>\n                                        <td style={{ border: \"1px solid black\", padding: \"8px\" }}>\n                                            <input\n                                                type=\"number\"\n                                                value={editedVertices[v.vertex_id]?.z ?? v.z}\n                                                onChange={(e) => handleVertexChange(v.vertex_id, \"z\", e.target.value)}\n                                                step=\"0.000001\"\n                                                style={{ width: \"100px\" }}\n                                            />\n                                        </td>\n                                        <td style={{ border: \"1px solid black\", padding: \"8px\" }}>\n                                            <button onClick={() => addVertex(v.zone_id, \"before\", v.vertex_id)}>Add Before</button>\n                                            <button onClick={() => addVertex(v.zone_id, \"after\", v.vertex_id)}>Add After</button>\n                                            <button onClick={() => stageDeleteVertex(v.vertex_id)}>Delete</button>\n                                        </td>\n                                    </tr>\n                                ))}\n                        </tbody>\n                    </table>\n                    <button onClick={saveVertices} style={{ marginTop: \"10px\" }}>Save All Changes</button>\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default ZoneViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}