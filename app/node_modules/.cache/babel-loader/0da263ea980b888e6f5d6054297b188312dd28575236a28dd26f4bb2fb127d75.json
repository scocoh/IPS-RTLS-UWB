{"ast":null,"code":"var _jsxFileName = \"/home/parcoadmin/parco_fastapi/app/src/components/MapZoneViewer.js\",\n  _s = $RefreshSig$();\n// # VERSION 250316 /home/parcoadmin/parco_fastapi/app/src/components/MapZoneViewer.js 0P.10B.01\n// #  \n// # ParcoRTLS Middletier Services, ParcoRTLS DLL, ParcoDatabases, ParcoMessaging, and other code\n// # Copyright (C) 1999 - 2025 Affiliated Commercial Services Inc.\n// # Invented by Scott Cohen & Bertrand Dugal.\n// # Coded by Jesse Chunn O.B.M.'24 and Michael Farnsworth and Others\n// # Published at GitHub https://github.com/scocoh/IPS-RTLS-UWB\n// #\n// # Licensed under AGPL-3.0: https://www.gnu.org/licenses/agpl-3.0.en.html\n\nimport React, { useEffect, useRef, useState, memo } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet-draw\";\nimport \"./Map.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapZoneViewer = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  mapId,\n  zones,\n  checkedZones,\n  vertices,\n  onVerticesUpdate,\n  useLeaflet\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const canvasRef = useRef(null);\n  const [mapData, setMapData] = useState(null);\n  const [error, setError] = useState(null);\n  const isInitialized = useRef(false);\n  const ctxRef = useRef(null);\n  const imageRef = useRef(null);\n  const drawnItems = useRef(new L.FeatureGroup());\n  const canvasBounds = useRef({\n    x: 0,\n    y: 0,\n    width: 800,\n    height: 600\n  });\n\n  // Fetch map data\n  useEffect(() => {\n    if (mapId) {\n      const fetchMapData = async () => {\n        try {\n          const response = await fetch(`/zoneviewer/get_map_data/${mapId}`);\n          if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\n          const data = await response.json();\n          console.log(\"✅ Fetched map data:\", data);\n          setMapData(data);\n          setError(null);\n        } catch (error) {\n          console.error(\"❌ Error fetching map data:\", error);\n          setError(`Error fetching map data: ${error.message}`);\n        }\n      };\n      fetchMapData();\n    }\n  }, [mapId]);\n\n  // Canvas rendering\n  useEffect(() => {\n    if (!useLeaflet && mapData && canvasRef.current && !isInitialized.current) {\n      console.log(\"🖌 Initializing Canvas rendering with mapData:\", mapData);\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      if (!ctx) return;\n      ctxRef.current = ctx;\n      canvas.width = 800;\n      canvas.height = 600;\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.src = mapData.imageUrl;\n      imageRef.current = img;\n      img.onload = () => {\n        const mapAspect = (mapData.bounds[1][1] - mapData.bounds[0][1]) / (mapData.bounds[1][0] - mapData.bounds[0][0]);\n        const canvasAspect = canvas.width / canvas.height;\n        let drawWidth = canvas.width;\n        let drawHeight = canvas.height;\n        let offsetX = 0;\n        let offsetY = 0;\n        if (mapAspect > canvasAspect) {\n          drawHeight = canvas.width / mapAspect;\n          offsetY = (canvas.height - drawHeight) / 2;\n        } else {\n          drawWidth = canvas.height * mapAspect;\n          offsetX = (canvas.width - drawWidth) / 2;\n        }\n        canvasBounds.current = {\n          x: offsetX,\n          y: offsetY,\n          width: drawWidth,\n          height: drawHeight\n        };\n        drawCanvas();\n      };\n      img.onerror = () => {\n        setError(\"Failed to load map image.\");\n      };\n      const drawCanvas = () => {\n        if (!ctxRef.current || !imageRef.current) return;\n        const ctx = ctxRef.current;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(imageRef.current, canvasBounds.current.x, canvasBounds.current.y, canvasBounds.current.width, canvasBounds.current.height);\n        const mapWidth = mapData.bounds[1][1] - mapData.bounds[0][1];\n        const mapHeight = mapData.bounds[1][0] - mapData.bounds[0][0];\n        const seniorZone = checkedZones.length > 1 ? Math.min(...checkedZones) : checkedZones[0];\n        checkedZones.forEach(zoneId => {\n          const zoneVertices = vertices.filter(v => v.zone_id === zoneId);\n          if (zoneVertices.length > 0) {\n            ctx.beginPath();\n            zoneVertices.forEach((vertex, index) => {\n              const x = canvasBounds.current.x + (vertex.x - mapData.bounds[0][1]) * (canvasBounds.current.width / mapWidth);\n              const y = canvasBounds.current.y + (mapData.bounds[1][0] - vertex.y) * (canvasBounds.current.height / mapHeight);\n              if (index === 0) ctx.moveTo(x, y);else ctx.lineTo(x, y);\n              ctx.fillStyle = \"red\";\n              ctx.fillRect(x - 2, y - 2, 4, 4);\n              if (zoneId === seniorZone) {\n                ctx.font = \"12px Arial\";\n                ctx.fillStyle = \"black\";\n                ctx.fillText(vertex.vertex_id, x + 5, y - 5); // Offset for readability\n              }\n            });\n            ctx.closePath();\n            ctx.strokeStyle = \"red\";\n            ctx.stroke();\n          }\n        });\n      };\n      isInitialized.current = true;\n      return () => {\n        isInitialized.current = false;\n      };\n    }\n  }, [mapData, useLeaflet, checkedZones, vertices]);\n\n  // Leaflet rendering\n  useEffect(() => {\n    if (useLeaflet && mapData && mapRef.current && !mapInstance.current) {\n      console.log(\"🗺 Initializing Leaflet with mapData:\", mapData);\n      mapInstance.current = L.map(mapRef.current, {\n        crs: L.CRS.Simple\n      }).fitBounds(mapData.bounds);\n      L.imageOverlay(mapData.imageUrl, mapData.bounds).addTo(mapInstance.current);\n      mapInstance.current.addLayer(drawnItems.current);\n    }\n    if (mapInstance.current) {\n      drawnItems.current.clearLayers();\n      const seniorZone = checkedZones.length > 1 ? Math.min(...checkedZones) : checkedZones[0];\n      checkedZones.forEach(zoneId => {\n        const zoneVertices = vertices.filter(v => v.zone_id === zoneId);\n        if (zoneVertices.length > 0) {\n          const latLngs = zoneVertices.map(v => [v.y, v.x]);\n          L.polygon(latLngs, {\n            color: \"red\",\n            weight: 2\n          }).addTo(drawnItems.current);\n          if (zoneId === seniorZone) {\n            zoneVertices.forEach(v => {\n              L.marker([v.y, v.x], {\n                icon: L.divIcon({\n                  className: \"vertex-label\",\n                  html: `<span>${v.vertex_id}</span>`,\n                  iconSize: [20, 20]\n                })\n              }).addTo(drawnItems.current);\n            });\n          }\n        }\n      });\n    }\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n      }\n    };\n  }, [mapData, useLeaflet, checkedZones, vertices]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 23\n    }, this), useLeaflet ? /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        height: \"600px\",\n        width: \"800px\",\n        border: \"2px solid black\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        border: \"2px solid black\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 9\n  }, this);\n}, \"QkWKMp/ggu4acsVzEZQAbHMrQDM=\")), \"QkWKMp/ggu4acsVzEZQAbHMrQDM=\");\n_c2 = MapZoneViewer;\nexport default MapZoneViewer;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapZoneViewer$memo\");\n$RefreshReg$(_c2, \"MapZoneViewer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","memo","L","jsxDEV","_jsxDEV","MapZoneViewer","_s","_c","mapId","zones","checkedZones","vertices","onVerticesUpdate","useLeaflet","mapRef","mapInstance","canvasRef","mapData","setMapData","error","setError","isInitialized","ctxRef","imageRef","drawnItems","FeatureGroup","canvasBounds","x","y","width","height","fetchMapData","response","fetch","ok","Error","status","data","json","console","log","message","current","canvas","ctx","getContext","img","Image","crossOrigin","src","imageUrl","onload","mapAspect","bounds","canvasAspect","drawWidth","drawHeight","offsetX","offsetY","drawCanvas","onerror","clearRect","drawImage","mapWidth","mapHeight","seniorZone","length","Math","min","forEach","zoneId","zoneVertices","filter","v","zone_id","beginPath","vertex","index","moveTo","lineTo","fillStyle","fillRect","font","fillText","vertex_id","closePath","strokeStyle","stroke","map","crs","CRS","Simple","fitBounds","imageOverlay","addTo","addLayer","clearLayers","latLngs","polygon","color","weight","marker","icon","divIcon","className","html","iconSize","remove","children","style","fileName","_jsxFileName","lineNumber","columnNumber","ref","border","_c2","$RefreshReg$"],"sources":["/home/parcoadmin/parco_fastapi/app/src/components/MapZoneViewer.js"],"sourcesContent":["// # VERSION 250316 /home/parcoadmin/parco_fastapi/app/src/components/MapZoneViewer.js 0P.10B.01\n// #  \n// # ParcoRTLS Middletier Services, ParcoRTLS DLL, ParcoDatabases, ParcoMessaging, and other code\n// # Copyright (C) 1999 - 2025 Affiliated Commercial Services Inc.\n// # Invented by Scott Cohen & Bertrand Dugal.\n// # Coded by Jesse Chunn O.B.M.'24 and Michael Farnsworth and Others\n// # Published at GitHub https://github.com/scocoh/IPS-RTLS-UWB\n// #\n// # Licensed under AGPL-3.0: https://www.gnu.org/licenses/agpl-3.0.en.html\n\nimport React, { useEffect, useRef, useState, memo } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet-draw\";\nimport \"./Map.css\";\n\nconst MapZoneViewer = memo(({ mapId, zones, checkedZones, vertices, onVerticesUpdate, useLeaflet }) => {\n    const mapRef = useRef(null);\n    const mapInstance = useRef(null);\n    const canvasRef = useRef(null);\n    const [mapData, setMapData] = useState(null);\n    const [error, setError] = useState(null);\n    const isInitialized = useRef(false);\n    const ctxRef = useRef(null);\n    const imageRef = useRef(null);\n    const drawnItems = useRef(new L.FeatureGroup());\n    const canvasBounds = useRef({ x: 0, y: 0, width: 800, height: 600 });\n\n    // Fetch map data\n    useEffect(() => {\n        if (mapId) {\n            const fetchMapData = async () => {\n                try {\n                    const response = await fetch(`/zoneviewer/get_map_data/${mapId}`);\n                    if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\n                    const data = await response.json();\n                    console.log(\"✅ Fetched map data:\", data);\n                    setMapData(data);\n                    setError(null);\n                } catch (error) {\n                    console.error(\"❌ Error fetching map data:\", error);\n                    setError(`Error fetching map data: ${error.message}`);\n                }\n            };\n            fetchMapData();\n        }\n    }, [mapId]);\n\n    // Canvas rendering\n    useEffect(() => {\n        if (!useLeaflet && mapData && canvasRef.current && !isInitialized.current) {\n            console.log(\"🖌 Initializing Canvas rendering with mapData:\", mapData);\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext(\"2d\");\n            if (!ctx) return;\n            ctxRef.current = ctx;\n\n            canvas.width = 800;\n            canvas.height = 600;\n\n            const img = new Image();\n            img.crossOrigin = \"anonymous\";\n            img.src = mapData.imageUrl;\n            imageRef.current = img;\n\n            img.onload = () => {\n                const mapAspect = (mapData.bounds[1][1] - mapData.bounds[0][1]) / (mapData.bounds[1][0] - mapData.bounds[0][0]);\n                const canvasAspect = canvas.width / canvas.height;\n                let drawWidth = canvas.width;\n                let drawHeight = canvas.height;\n                let offsetX = 0;\n                let offsetY = 0;\n\n                if (mapAspect > canvasAspect) {\n                    drawHeight = canvas.width / mapAspect;\n                    offsetY = (canvas.height - drawHeight) / 2;\n                } else {\n                    drawWidth = canvas.height * mapAspect;\n                    offsetX = (canvas.width - drawWidth) / 2;\n                }\n\n                canvasBounds.current = { x: offsetX, y: offsetY, width: drawWidth, height: drawHeight };\n                drawCanvas();\n            };\n\n            img.onerror = () => {\n                setError(\"Failed to load map image.\");\n            };\n\n            const drawCanvas = () => {\n                if (!ctxRef.current || !imageRef.current) return;\n                const ctx = ctxRef.current;\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                ctx.drawImage(imageRef.current, canvasBounds.current.x, canvasBounds.current.y, canvasBounds.current.width, canvasBounds.current.height);\n\n                const mapWidth = mapData.bounds[1][1] - mapData.bounds[0][1];\n                const mapHeight = mapData.bounds[1][0] - mapData.bounds[0][0];\n                const seniorZone = checkedZones.length > 1 ? Math.min(...checkedZones) : checkedZones[0];\n\n                checkedZones.forEach(zoneId => {\n                    const zoneVertices = vertices.filter(v => v.zone_id === zoneId);\n                    if (zoneVertices.length > 0) {\n                        ctx.beginPath();\n                        zoneVertices.forEach((vertex, index) => {\n                            const x = canvasBounds.current.x + (vertex.x - mapData.bounds[0][1]) * (canvasBounds.current.width / mapWidth);\n                            const y = canvasBounds.current.y + (mapData.bounds[1][0] - vertex.y) * (canvasBounds.current.height / mapHeight);\n                            if (index === 0) ctx.moveTo(x, y);\n                            else ctx.lineTo(x, y);\n                            ctx.fillStyle = \"red\";\n                            ctx.fillRect(x - 2, y - 2, 4, 4);\n\n                            if (zoneId === seniorZone) {\n                                ctx.font = \"12px Arial\";\n                                ctx.fillStyle = \"black\";\n                                ctx.fillText(vertex.vertex_id, x + 5, y - 5); // Offset for readability\n                            }\n                        });\n                        ctx.closePath();\n                        ctx.strokeStyle = \"red\";\n                        ctx.stroke();\n                    }\n                });\n            };\n\n            isInitialized.current = true;\n            return () => {\n                isInitialized.current = false;\n            };\n        }\n    }, [mapData, useLeaflet, checkedZones, vertices]);\n\n    // Leaflet rendering\n    useEffect(() => {\n        if (useLeaflet && mapData && mapRef.current && !mapInstance.current) {\n            console.log(\"🗺 Initializing Leaflet with mapData:\", mapData);\n            mapInstance.current = L.map(mapRef.current, { crs: L.CRS.Simple }).fitBounds(mapData.bounds);\n            L.imageOverlay(mapData.imageUrl, mapData.bounds).addTo(mapInstance.current);\n            mapInstance.current.addLayer(drawnItems.current);\n        }\n\n        if (mapInstance.current) {\n            drawnItems.current.clearLayers();\n            const seniorZone = checkedZones.length > 1 ? Math.min(...checkedZones) : checkedZones[0];\n\n            checkedZones.forEach(zoneId => {\n                const zoneVertices = vertices.filter(v => v.zone_id === zoneId);\n                if (zoneVertices.length > 0) {\n                    const latLngs = zoneVertices.map(v => [v.y, v.x]);\n                    L.polygon(latLngs, { color: \"red\", weight: 2 }).addTo(drawnItems.current);\n\n                    if (zoneId === seniorZone) {\n                        zoneVertices.forEach(v => {\n                            L.marker([v.y, v.x], {\n                                icon: L.divIcon({\n                                    className: \"vertex-label\",\n                                    html: `<span>${v.vertex_id}</span>`,\n                                    iconSize: [20, 20],\n                                })\n                            }).addTo(drawnItems.current);\n                        });\n                    }\n                }\n            });\n        }\n\n        return () => {\n            if (mapInstance.current) {\n                mapInstance.current.remove();\n                mapInstance.current = null;\n            }\n        };\n    }, [mapData, useLeaflet, checkedZones, vertices]);\n\n    return (\n        <div>\n            {error && <div style={{ color: \"red\" }}>{error}</div>}\n            {useLeaflet ? (\n                <div ref={mapRef} style={{ height: \"600px\", width: \"800px\", border: \"2px solid black\" }} />\n            ) : (\n                <canvas ref={canvasRef} style={{ border: \"2px solid black\" }} />\n            )}\n        </div>\n    );\n});\n\nexport default MapZoneViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}